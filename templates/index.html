{% extends "layout.html" %}

{% block title %}Accueil - Bibliothèque{% endblock %}

{% block content %}
<div class="text-center mb-5">
    <h1 class="display-4 fw-bold mb-3">
        <i class="fas fa-book-open text-primary"></i> Bienvenue dans votre Bibliothèque Digitale
    </h1>
    <p class="lead text-muted">Gérez votre collection de livres PDF avec facilité</p>
</div>

<!-- Statistiques -->
<div class="row mb-5">
    <div class="col-md-4">
        <div class="stats-card text-center">
            <i class="fas fa-book float-end"></i>
            <h2 class="display-4 fw-bold">{{ total_books }}</h2>
            <p class="mb-0">Livres</p>
        </div>
    </div>
    <div class="col-md-4">
        <div class="stats-card text-center">
            <i class="fas fa-user-edit float-end"></i>
            <h2 class="display-4 fw-bold">{{ total_authors }}</h2>
            <p class="mb-0">Auteurs</p>
        </div>
    </div>
    <div class="col-md-4">
        <div class="stats-card text-center">
            <i class="fas fa-tags float-end"></i>
            <h2 class="display-4 fw-bold">{{ total_categories }}</h2>
            <p class="mb-0">Catégories</p>
        </div>
    </div>
</div>

<!-- Livres récents -->
<h3 class="mb-4"><i class="fas fa-clock"></i> Derniers livres ajoutés</h3>
<div class="row">
    {% for book in recent_books %}
    <div class="col-md-4 mb-4">
        <div class="card h-100">
            <a href="/book/{{ book[0] }}">
                <img src="{{ url_for('static', filename='uploads/covers/' + book[3]) }}" 
                     class="book-cover" 
                     alt="{{ book[1] }}"
                     onerror="this.src='{{ url_for('static', filename='uploads/covers/default-cover.jpg') }}'">
            </a>
            <div class="card-body">
                <h5 class="card-title">{{ book[1] }}</h5>
                <p class="card-text text-muted">
                    <i class="fas fa-user"></i> {{ book[2] }}
                </p>
                <a href="/book/{{ book[0] }}" class="btn btn-primary btn-sm btn-custom w-100">
                    <i class="fas fa-eye"></i> Voir détails
                </a>
            </div>
        </div>
    </div>
    {% endfor %}
    
    {% if recent_books|length == 0 %}
    <div class="col-12 text-center py-5">
        <i class="fas fa-book-open fa-5x text-muted mb-3"></i>
        <h4>Aucun livre pour le moment</h4>
        <p class="text-muted">Commencez par ajouter votre premier livre !</p>
        <a href="/books" class="btn btn-primary btn-custom">
            <i class="fas fa-plus"></i> Ajouter un livre
        </a>
    </div>
    {% endif %}
</div>

<!-- Actions rapides -->
<div class="row mt-5">
    <div class="col-12">
        <h3 class="mb-4"><i class="fas fa-bolt"></i> Actions rapides</h3>
    </div>
    <div class="col-md-4 mb-3">
        <div class="card text-center p-4 h-100">
            <i class="fas fa-plus-circle fa-3x text-primary mb-3"></i>
            <h5>Ajouter un livre</h5>
            <p class="text-muted">Ajoutez un nouveau livre avec PDF et couverture</p>
            <a href="/books" class="btn btn-primary btn-custom">Aller aux livres</a>
        </div>
    </div>
    <div class="col-md-4 mb-3">
        <div class="card text-center p-4 h-100">
            <i class="fas fa-user-plus fa-3x text-success mb-3"></i>
            <h5>Gérer les auteurs</h5>
            <p class="text-muted">Ajoutez et gérez les auteurs de votre bibliothèque</p>
            <a href="/authors" class="btn btn-success btn-custom">Voir auteurs</a>
        </div>
    </div>
    <div class="col-md-4 mb-3">
        <div class="card text-center p-4 h-100">
            <i class="fas fa-th-large fa-3x text-warning mb-3"></i>
            <h5>Organiser catégories</h5>
            <p class="text-muted">Créez des catégories pour organiser vos livres</p>
            <a href="/categories" class="btn btn-warning btn-custom">Voir catégories</a>
        </div>
    </div>
</div>
{% endblock %}